(()=>{"use strict";const e=(e,t,n)=>{e.innerHTML="";const r=document.createElement("table");r.className="field",t.forEach(((e,t)=>{const a=document.createElement("tr");r.insertAdjacentElement("afterbegin",a),e.forEach(((e,r)=>{const s=document.createElement("td");s.className="cell",s.classList.add(""+(e?"cell__alive":"cell__death")),s.dataset.y=`${t}`,s.dataset.x=`${r}`,s.addEventListener("click",(()=>{n(r,t,Boolean(e))})),a.insertAdjacentElement("afterbegin",s)}))})),e.insertAdjacentElement("afterbegin",r)},t=(e,t,n)=>{let r=0;return n-1>=0&&n-1<e.length&&(r+=e[n-1][t-1]??0,r+=e[n-1][t]??0,r+=e[n-1][t+1]??0),n>=0&&n<e.length&&(r+=e[n][t-1]??0,r+=e[n][t+1]??0),n+1>=0&&n+1<e.length&&(r+=e[n+1][t-1]??0,r+=e[n+1][t]??0,r+=e[n+1][t+1]??0),r};function n(e,t){return!1===e&&3===t||!0===e&&(2===t||3===t)}((r,a=20,s=20,l=1e3)=>{let c=Array.from({length:a}).map((()=>Array.from({length:s}).fill(0)));const i=document.createElement("div"),m=(t,n,r)=>{c[n][t]=!r,e(i,c,m)},d=()=>{c=Array.from({length:a}).map((()=>Array.from({length:s}).fill(0))),e(i,c,m)};i.setAttribute("id","app"),r.insertAdjacentElement("afterbegin",i);const o=document.createElement("button");let u;o.textContent="start",o.classList.add("btn__switch");const b=r=>{const l=()=>{c=(e=>{const r=JSON.parse(JSON.stringify(e));for(let a=0;a<e.length;a++)for(let s=0;s<e[a].length;s++){const l=t(e,s,a),c=n(0!==e[a][s],l);r[a][s]=c?1:0}return r})(c),e(i,c,m)};"start"===o.textContent?(o.textContent="stop",u=setInterval(l,r)):(o.textContent="start",clearInterval(u),c=Array.from({length:a}).map((()=>Array.from({length:s}).fill(0))),e(i,c,m))};o.addEventListener("click",(()=>{b(l)}));const A=document.createElement("input"),f=document.createElement("input"),E=document.createElement("input");A.className="input__width",A.setAttribute("type","number"),A.setAttribute("min","10"),A.setAttribute("max","50"),A.setAttribute("step","1"),A.addEventListener("input",(()=>{s=Number(A.value),d()})),f.className="input__height",f.setAttribute("type","number"),f.setAttribute("min","10"),f.setAttribute("max","50"),f.setAttribute("step","1"),f.addEventListener("input",(()=>{a=Number(f.value),d()})),E.className="input__range",E.setAttribute("type","range"),E.setAttribute("min","1"),E.setAttribute("max","5"),E.setAttribute("step","1"),E.addEventListener("change",(()=>{l=1e3*Number(E.value)}));const p=document.createElement("div");p.className="wrapper",p.insertAdjacentElement("beforeend",A),p.insertAdjacentElement("beforeend",f),r.insertAdjacentElement("beforeend",p),r.insertAdjacentElement("beforeend",E),r.insertAdjacentElement("beforeend",o),e(i,c,m)})(document.body)})();